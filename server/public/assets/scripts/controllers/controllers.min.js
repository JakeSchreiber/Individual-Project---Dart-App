/*! angular_routing_lecture_build 2015-12-02 */
myApp.controller("DartController",["$scope","$http","$interval","PlayerService",function(a,b,c,d){console.log("Dart Controller"),a.setPlayers=function(){a.playerArray=[],a.chooseOpponent=!0,a.getLoggedInPlayer=function(){b.get("/getloggedinplayer").then(function(b){a.loggedInPlayer=b.data,a.playerArray=a.loggedInPlayer,console.log("Logged in player line 19:",a.loggedInPlayer),console.log("PlayerArray line 20:",a.playerArray)})},a.getLoggedInPlayer(),console.log("Player Array from line 26 (after getLoggedInPlayer):",a.playerArray),a.getAllUsers=function(){b.get("/getallplayers").then(function(b){a.allPlayers=b.data,console.log(a.allPlayers)})},a.getAllUsers(),a.isSelectedPlayer=function(){return a.playerArray.push(a.selectedPlayer),console.log("Player Array from line 45-50 (isSelectedPlayer):",a.playerArray),console.log(a.selectedPlayer),a.selectedPlayer}},a.setPlayers();var e=0;a.filterLimit=4,a.myvalue=!1,a.showScoreboard=!0,a.gameplay=function(){function b(){a.currentPlayer=a.playerArray[e],console.log(a.currentPlayer)}a.chooseOpponent=!1,b(),a.changeValue=function(b){function c(){var a=angular.element(document.querySelector(".team1Score"));a.toggleClass("active inactive");var b=angular.element(document.querySelector(".team2Score"));b.toggleClass("active inactive")}function d(){3==a.currentPlayer.dartArray.length&&(a.currentPlayer.roundScore=a.currentPlayer.dartArray[0]+a.currentPlayer.dartArray[1]+a.currentPlayer.dartArray[2]),2==a.currentPlayer.dartArray.length&&(a.currentPlayer.roundScore=a.currentPlayer.dartArray[0]+a.currentPlayer.dartArray[1]),1==a.currentPlayer.dartArray.length&&(a.currentPlayer.roundScore=a.currentPlayer.dartArray[0]),console.log(a.currentPlayer.roundScore)}function f(){a.currentPlayer.roundScore=0,a.currentPlayer.dartsRemaining=3,a.currentPlayer.dartArray=[],a.dart1=0,a.dart2=0,a.dart3=0}function g(){if(0==a.currentPlayer.score&&(alert("Game complete"),k(),i(),m()),a.currentPlayer.score<0){var b=e;d(),alert("BUST!"),a.playerArray[b].score+=a.currentPlayer.roundScore,console.log(a.playerArray[b].score),c(),f(),l()}}function h(){a.currentPlayer.ppd=parseFloat(a.currentPlayer.scoreForAverage/a.currentPlayer.dartsThrown).toFixed(2)}function i(){a.currentPlayer.roundAverage=parseFloat(a.currentPlayer.scoreForAverage/(a.currentPlayer.dartsThrown/3)).toFixed(2)}function j(){25!==a.dart1&&50!==a.dart1||25!==a.dart2&&50!==a.dart2||25!==a.dart3&&50!==a.dart3||a.currentPlayer.hattricks++,50===a.dart1&&50===a.dart2&&50===a.dart3&&a.currentPlayer.deadeyes++}function k(){a.currentPlayer.roundScore>=100&&a.currentPlayer.roundScore<140&&a.currentPlayer._100++,a.currentPlayer.roundScore>=140&&a.currentPlayer.roundScore<180&&a.currentPlayer._140++,180==a.currentPlayer.roundScore&&a.currentPlayer._180++}function l(){var b=e+1;b<a.playerArray.length?(a.currentPlayer=a.playerArray[b],e++,a.gameplay()):(e=0,a.currentPlayer=a.playerArray[0],a.gameplay())}function m(){a.myvalue=!0,a.showScoreboard=!1}a.currentPlayer.dartArray.push(b),a.currentPlayer.score-=b,a.currentPlayer.scoreForAverage+=b,a.dart1=a.currentPlayer.dartArray[0],a.dart2=a.currentPlayer.dartArray[1],a.dart3=a.currentPlayer.dartArray[2],a.currentPlayer.dartsThrown++,a.currentPlayer.dartsRemaining--,j(),g(),h(),0==a.currentPlayer.dartsRemaining&&(d(),console.log(a.currentPlayer.roundScore),confirm("Round Score: "+a.currentPlayer.roundScore+". Remove Darts")===!0?(a.currentPlayer.roundArray.unshift(a.currentPlayer.roundScore),k(),f(),l(),i(),c()):(a.currentPlayer.score+=a.currentPlayer.roundScore,a.currentPlayer.dartsThrown=a.currentPlayer.dartsThrown-3,f()))}}}]),myApp.controller("ProfileController",["$scope","$http",function(a,b){console.log("Profile Controller"),a.getProfileInfo=function(){b.get("/getprofile").then(function(a){return c(a)})};var c=function(c){0===c.data.length?b.post("/createuser").then(function(b){a.profileInfo=b.data,console.log(b.data),console.log("Empty Array test fire")}):a.profileInfo=c.data};a.getProfileInfo()}]),myApp.controller("StatsController",["$scope","$http",function(a,b){console.log("Stats Controller"),a.getStats=function(){b.get("/stats").then(function(b){a.stats=b.data,console.log(a.stats)})},a.getStats()}]);