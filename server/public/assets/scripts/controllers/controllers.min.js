/*! angular_routing_lecture_build 2015-12-03 */
myApp.controller("DartController",["$scope","$http","$interval","PlayerService",function(a,b,c,d){console.log("Dart Controller"),a.startNewGame=function(){a.myvalue=!1,a.showScoreboard=!0,a.selectedPlayer=!1,a.setPlayers()},a.setPlayers=function(){a.playerArray=[],a.chooseOpponent=!0,a.switchPlayerContainer=!0,a.getLoggedInPlayer=function(){b.get("/getloggedinplayer").then(function(b){a.loggedInPlayer=b.data,a.playerArray=a.loggedInPlayer,a.playerArray[0].roundArray=[],a.playerArray[0].dartArray=[],console.log("Logged in player line 28:",a.loggedInPlayer),console.log("PlayerArray line 29:",a.playerArray)})},a.getLoggedInPlayer(),console.log("Player Array from line 35(51) (after getLoggedInPlayer):",a.playerArray),a.getAllUsers=function(){b.get("/getallplayers").then(function(b){a.allPlayers=b.data,console.log("Get all Players, Line 41(57)",a.allPlayers)})},a.getAllUsers(),a.isSelectedPlayer=function(){return a.playerArray[1]=a.selectedPlayer,console.log("Player Array from line 53(69) (isSelectedPlayer):",a.playerArray),console.log(a.selectedPlayer),a.selectedPlayer}},a.setPlayers();var e=0;a.filterLimit=8,a.myvalue=!1,a.showScoreboard=!0,a.chooseWhoStarts=function(){e=0==e?1:0;var a=angular.element(document.querySelector(".team1Score"));a.toggleClass("active inactive");var b=angular.element(document.querySelector(".team2Score"));b.toggleClass("active inactive")},a.gameplay=function(){function c(){a.currentPlayer=a.playerArray[e],console.log(a.currentPlayer)}a.chooseOpponent=!1,a.switchPlayerContainer=!1,c(),a.changeValue=function(c){function d(){var a=angular.element(document.querySelector(".team1Score"));a.toggleClass("active inactive");var b=angular.element(document.querySelector(".team2Score"));b.toggleClass("active inactive")}function f(){3==a.currentPlayer.dartArray.length&&(a.currentPlayer.roundScore=a.currentPlayer.dartArray[0]+a.currentPlayer.dartArray[1]+a.currentPlayer.dartArray[2]),2==a.currentPlayer.dartArray.length&&(a.currentPlayer.roundScore=a.currentPlayer.dartArray[0]+a.currentPlayer.dartArray[1]),1==a.currentPlayer.dartArray.length&&(a.currentPlayer.roundScore=a.currentPlayer.dartArray[0]),console.log(a.currentPlayer.roundScore)}function g(){a.currentPlayer.roundScore=0,a.currentPlayer.dartsRemaining=3,a.currentPlayer.dartArray=[],a.dart1=0,a.dart2=0,a.dart3=0}function h(){if(0==a.currentPlayer.score&&(alert("Game complete"),l(),j(),n()),a.currentPlayer.score<0){var b=e;f(),alert("BUST!"),a.playerArray[b].score+=a.currentPlayer.roundScore,console.log(a.playerArray[b].score),d(),g(),m()}}function i(){a.currentPlayer.ppd=parseFloat(a.currentPlayer.scoreForAverage/a.currentPlayer.dartsThrown).toFixed(2)}function j(){a.currentPlayer.roundAverage=parseFloat(a.currentPlayer.scoreForAverage/(a.currentPlayer.dartsThrown/3)).toFixed(2)}function k(){25!==a.dart1&&50!==a.dart1||25!==a.dart2&&50!==a.dart2||25!==a.dart3&&50!==a.dart3||a.currentPlayer.hattricks++,50===a.dart1&&50===a.dart2&&50===a.dart3&&a.currentPlayer.deadeyes++}function l(){a.currentPlayer.roundScore>=100&&a.currentPlayer.roundScore<140&&a.currentPlayer._100++,a.currentPlayer.roundScore>=140&&a.currentPlayer.roundScore<180&&a.currentPlayer._140++,180==a.currentPlayer.roundScore&&a.currentPlayer._180++}function m(){var b=e+1;b<a.playerArray.length?(a.currentPlayer=a.playerArray[b],e++,a.gameplay()):(e=0,a.currentPlayer=a.playerArray[0],a.gameplay())}function n(){a.myvalue=!0,a.showScoreboard=!1}a.currentPlayer.dartArray.push(c),a.currentPlayer.score-=c,a.currentPlayer.scoreForAverage+=c,a.dart1=a.currentPlayer.dartArray[0],a.dart2=a.currentPlayer.dartArray[1],a.dart3=a.currentPlayer.dartArray[2],a.currentPlayer.dartsThrown++,a.currentPlayer.dartsRemaining--,k(),h(),i(),0==a.currentPlayer.dartsRemaining&&(f(),console.log(a.currentPlayer.roundScore),confirm("Round Score: "+a.currentPlayer.roundScore+". Remove Darts")===!0?(a.currentPlayer.roundArray.push(a.currentPlayer.roundScore),l(),g(),m(),j(),d()):(a.currentPlayer.score+=a.currentPlayer.roundScore,a.currentPlayer.dartsThrown=a.currentPlayer.dartsThrown-3,g())),a.uploadPlayer1Stats=function(){b({url:"/updateplayer1stats",method:"POST",data:JSON.stringify({username:a.playerArray[0].username,_100:a.playerArray[0]._100,_140:a.playerArray[0]._140,_180:a.playerArray[0]._180,hattricks:a.playerArray[0].hattricks,deadeyes:a.playerArray[0].deadeyes,totalgames:a.playerArray[0].totalgames,wins:a.playerArray[0].wins,average:a.playerArray[0].roundAverage,ppd:a.playerArray[0].ppd}),headers:{"Content-Type":"application/json"}}).success(function(b,c,d,e){a.users=b.users}).error(function(b,c,d,e){a.status=c+" "+d})},a.uploadPlayer2Stats=function(){b({url:"/updateplayer2stats",method:"POST",data:JSON.stringify({username:a.playerArray[1].username,_100:a.playerArray[1]._100,_140:a.playerArray[1]._140,_180:a.playerArray[1]._180,hattricks:a.playerArray[1].hattricks,deadeyes:a.playerArray[1].deadeyes,totalgames:a.playerArray[1].totalgames,wins:a.playerArray[1].wins,average:a.playerArray[1].roundAverage,ppd:a.playerArray[1].ppd}),headers:{"Content-Type":"application/json"}}).success(function(b,c,d,e){a.users=b.users}).error(function(b,c,d,e){a.status=c+" "+d})}}}}]),myApp.controller("ProfileController",["$scope","$http",function(a,b){console.log("Profile Controller"),a.getProfileInfo=function(){b.get("/getprofile").then(function(a){return c(a)})};var c=function(c){0===c.data.length?b.post("/createuser").then(function(b){a.profileInfo=b.data,console.log(b.data),console.log("Empty Array test fire")}):a.profileInfo=c.data};a.getProfileInfo()}]),myApp.controller("StatsController",["$scope","$http",function(a,b){console.log("Stats Controller"),a.getStats=function(){b.get("/stats").then(function(b){a.stats=b.data,console.log(a.stats)})},a.getStats()}]);